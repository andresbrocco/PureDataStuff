#N canvas 1906 227 681 684 12;
#X obj 70 127 inlet;
#X obj 108 606 outlet;
#X text 33 106 graph (matrix m x m);
#X text 31 631 clusters (matrix m x 1) representing which cluster each
node belongs to., f 37;
#N canvas 1 395 681 684 mtx_normalize 0;
#X obj 135 32 inlet;
#X obj 135 331 outlet;
#X text 117 9 matrix m x m;
#X text 17 357 stochastic markov matrix m x m (sum of columns equal
1);
#X obj 154 190 mtx_sum;
#X obj 154 214 list prepend;
#X msg 223 190 matrix 1 \$1;
#X obj 178 166 mtx_size;
#X obj 135 144 t a a a;
#X obj 154 237 list trim;
#X obj 135 307 mtx_./;
#X obj 154 283 mtx_repmat;
#X msg 211 260 \$1 1;
#X obj 135 57 t a a;
#X obj 181 91 mtx_minmax;
#X obj 135 118 mtx_- 0;
#X connect 0 0 13 0;
#X connect 4 0 5 0;
#X connect 5 0 9 0;
#X connect 6 0 5 1;
#X connect 7 1 6 0;
#X connect 7 1 12 0;
#X connect 8 0 10 0;
#X connect 8 1 4 0;
#X connect 8 2 7 0;
#X connect 9 0 11 0;
#X connect 10 0 1 0;
#X connect 11 0 10 1;
#X connect 12 0 11 1;
#X connect 13 0 15 0;
#X connect 13 1 14 0;
#X connect 14 0 15 1;
#X connect 15 0 8 0;
#X restore 119 174 pd mtx_normalize;
#X text 42 23 Arguments:;
#X text 58 55 \$2: inflation parameter (normally 2);
#X text 58 40 \$1: number of iterations;
#X obj 70 174 \$1;
#X floatatom 70 197 5 0 0 0 iterations - -;
#X text 126 192 Mg;
#X obj 119 252 mtx_*;
#X obj 119 275 mtx_.^ \$2;
#N canvas 6 395 450 300 prune 0;
#X obj 37 37 inlet;
#X obj 37 239 outlet;
#X text 42 271 set low values to 0 to save processing and converge
faster;
#X obj 70 191 mtx_> 0.01;
#X obj 82 84 mtx_size;
#X floatatom 137 138 5 0 0 0 - - -;
#X obj 37 214 mtx_.*;
#X obj 37 60 t a a a;
#X obj 137 113 pow -1;
#X obj 137 163 * \$3;
#X connect 0 0 7 0;
#X connect 3 0 6 1;
#X connect 4 1 8 0;
#X connect 5 0 9 0;
#X connect 6 0 1 0;
#X connect 7 0 6 0;
#X connect 7 1 3 0;
#X connect 7 2 4 0;
#X connect 8 0 5 0;
#X connect 9 0 3 1;
#X restore 119 325 pd prune;
#X text 330 14 This algorithm implements the described in the following
link: https://youtu.be/574z9nisRuE;
#X obj 70 220 until;
#X obj 101 380 mtx;
#N canvas 1 395 450 300 mtx_normalize 0;
#X obj 135 32 inlet;
#X obj 135 243 outlet;
#X text 117 9 matrix m x m;
#X text 17 269 stochastic markov matrix m x m (sum of columns equal
1);
#X obj 154 102 mtx_sum;
#X obj 154 126 list prepend;
#X msg 223 102 matrix 1 \$1;
#X obj 178 78 mtx_size;
#X obj 135 56 t a a a;
#X obj 154 149 list trim;
#X obj 135 219 mtx_./;
#X obj 154 195 mtx_repmat;
#X msg 211 172 \$1 1;
#X connect 0 0 8 0;
#X connect 4 0 5 0;
#X connect 5 0 9 0;
#X connect 6 0 5 1;
#X connect 7 1 6 0;
#X connect 7 1 12 0;
#X connect 8 0 10 0;
#X connect 8 1 4 0;
#X connect 8 2 7 0;
#X connect 9 0 11 0;
#X connect 10 0 1 0;
#X connect 11 0 10 1;
#X connect 12 0 11 1;
#X restore 119 300 pd mtx_normalize;
#X obj 236 410 mtx_print clusters;
#X obj 187 212 mtx_print normalized;
#N canvas 1 395 450 300 mtx_normalize 0;
#X obj 135 32 inlet;
#X obj 135 243 outlet;
#X text 117 9 matrix m x m;
#X text 17 269 stochastic markov matrix m x m (sum of columns equal
1);
#X obj 154 102 mtx_sum;
#X obj 154 126 list prepend;
#X msg 223 102 matrix 1 \$1;
#X obj 178 78 mtx_size;
#X obj 135 56 t a a a;
#X obj 154 149 list trim;
#X obj 135 219 mtx_./;
#X obj 154 195 mtx_repmat;
#X msg 211 172 \$1 1;
#X connect 0 0 8 0;
#X connect 4 0 5 0;
#X connect 5 0 9 0;
#X connect 6 0 5 1;
#X connect 7 1 6 0;
#X connect 7 1 12 0;
#X connect 8 0 10 0;
#X connect 8 1 4 0;
#X connect 8 2 7 0;
#X connect 9 0 11 0;
#X connect 10 0 1 0;
#X connect 11 0 10 1;
#X connect 12 0 11 1;
#X restore 119 350 pd mtx_normalize;
#X obj 205 148 mtx_print original;
#X text 58 70 \$3: prune factor (~ 1);
#N canvas 1436 354 450 300 checkForConvergence 1;
#X obj 110 37 inlet;
#X text 90 14 matrix m x m;
#X obj 110 247 outlet;
#X text 71 267 bang when converged;
#X obj 110 89 mtx_-;
#X obj 110 115 mtx_minmax;
#X obj 177 166 == 0;
#X obj 110 166 == 0;
#X obj 110 193 *;
#X obj 110 220 sel 1;
#X floatatom 110 140 5 0 0 0 - - -;
#X floatatom 177 140 5 0 0 0 - - -;
#X obj 110 62 t a a;
#X connect 0 0 12 0;
#X connect 4 0 5 0;
#X connect 5 0 10 0;
#X connect 5 1 11 0;
#X connect 6 0 8 1;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 2 0;
#X connect 10 0 7 0;
#X connect 11 0 6 0;
#X connect 12 0 4 1;
#X connect 12 1 4 0;
#X restore 56 443 pd checkForConvergence;
#X obj 70 150 t b a b;
#X obj 28 319 spigot 1;
#X msg 66 288 0, f 1;
#X msg 86 288 1, f 1;
#X connect 0 0 24 0;
#X connect 4 0 19 0;
#X connect 4 0 11 1;
#X connect 4 0 11 0;
#X connect 8 0 9 0;
#X connect 9 0 15 0;
#X connect 11 0 12 0;
#X connect 12 0 17 0;
#X connect 13 0 20 0;
#X connect 15 0 25 0;
#X connect 16 0 11 0;
#X connect 16 0 18 0;
#X connect 16 0 23 0;
#X connect 17 0 13 0;
#X connect 20 0 11 1;
#X connect 20 0 16 1;
#X connect 23 0 26 0;
#X connect 24 0 8 0;
#X connect 24 1 21 0;
#X connect 24 1 4 0;
#X connect 24 2 27 0;
#X connect 25 0 16 0;
#X connect 26 0 25 1;
#X connect 27 0 25 1;
